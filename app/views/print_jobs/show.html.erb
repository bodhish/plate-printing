<div>
  <div class="d-flex justify-content-between ">
    <h1 class="">
      Job <%= @print_job.ref_no %>
    </h1>
    <div>
      <%= button_to "Edit Job", edit_print_job_path, method: :get, class: "text-sm px-2 py-1 rounded shadow-sm bg-indigo-500 text-white" %>
    </div>
  </div>

  <table class="table table-striped border">
    <tbody>
    <tr>
      <th scope="row">Reference Number</th>
      <td><%= @print_job.ref_no %></td>
    </tr>
    <tr>
      <th scope="row">Name</th>
      <td><%= @print_job.name %></td>
    </tr>
    <tr>
      <th scope="row">Customer Name</th>
      <td> <%= @print_job.customer.name %></td>
    </tr>
    <tr>
      <th scope="row">Plates</th>
      <td> <%= @print_job.plate_jobs.map { |pj| "#{pj.plate_dimension.dimension} (set: #{pj.set}, color: #{pj.color}, wastage: #{pj.wastage})" }.join(', ') %></td>
    </tr>
    <tr>
      <th scope="row">Status</th>
      <td> <%= @print_job.state %></td>
    </tr>
    <tr>
      <th scope="row">Assignee</th>
      <td> <%= @print_job.assignee&.name&.titleize %></td>
    </tr>
    <tr>
      <th scope="row">Comments</th>
      <td> <%= @print_job.comments %></td>
    </tr>
    <tr>
      <th scope="row">Created at</th>
      <td> <%= @print_job.created_at.strftime('%b %e, %l:%M %p') %></td>
    </tr>
    <% if @print_job.state != 'Pending' %>
      <tr>
        <th scope="row">Printed at</th>
        <td> <%= @print_job.printed_at&.strftime('%b %e, %l:%M %p') %></td>
      </tr>
      <% if @print_job.state == 'Delivered' %>
        <tr>
          <th scope="row">Delivered by</th>
          <td> <%= @print_job.delivered_by&.name&.titleize %></td>
        </tr>
        <tr>
          <th scope="row">Delivered at</th>
          <td> <%= @print_job.delivered_at&.strftime('%b %e, %l:%M %p') %></td>
        </tr>
      <% end %>
     <% end %>
    </tbody>
  </table>
</div>